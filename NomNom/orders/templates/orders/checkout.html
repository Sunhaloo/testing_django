{% extends 'base.html' %}
{% load static %}

{% block title %}Checkout - Nomnom{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'orders/order.css' %}">
{% endblock %}

{% block content %}
{% include 'partials/progress_bar.html' %}
<script> window.currentStep = 2; </script>

<div class="order-wrapper">
    <div class="container">

        <main class="main-content">
            <div class="content-area">

                <!-- INFORMATION PAGE -->
                <section id="info-page" class="page-section active">

                    <!-- CONTACT INFORMATION -->
                    <div class="form-section">
                        <h2><i class="fas fa-address-card"></i> Contact Information</h2>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="email">Email Address</label>
                                <input type="email" id="email" placeholder="aisha@example.com" required>
                                <div class="error-message" id="email-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" placeholder="51234567" required>
                                <div class="error-message" id="phone-error"></div>
                            </div>
                        </div>
                    </div>

                    <!-- SHIPPING -->
                    <div class="form-section">
                        <h2><i class="fas fa-shipping-fast"></i> Shipping Address</h2>

                        <div class="form-grid">

                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input type="text" id="firstName" required>
                                <div class="error-message" id="firstName-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input type="text" id="lastName" required>
                                <div class="error-message" id="lastName-error"></div>
                            </div>

                            <div class="form-group full-width">
                                <label for="address">Street Address</label>
                                <input type="text" id="address" placeholder="e.g., 123 Main Street" required>
                                <div class="error-message" id="address-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="city">City / Town</label>
                                <input type="text" id="city" list="city-list" placeholder="Select or type city" required>

                                <datalist id="city-list">
                                    {% include 'orders/city_list.html' %}
                                </datalist>

                                <div class="error-message" id="city-error"></div>
                            </div>


                            <div class="form-group">
                                <label for="zip">Postal Code</label>
                                <input type="text" id="zip" placeholder="12345" required>
                                <div class="error-message" id="zip-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="country">Country</label>
                                <input type="text" id="country" value="Mauritius" readonly>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- PAYMENT PAGE -->
                <section id="payment-page" class="page-section">

                    <div class="form-section">
                        <h2><i class="fas fa-credit-card"></i> Payment Information</h2>

                        <div class="form-grid">

                            <div class="form-group full-width">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" id="cardNumber" placeholder="0000 0000 0000 0000" maxlength="19" required>
                                <div class="card-icons">
                                    <i class="fab fa-cc-visa"></i>
                                    <i class="fab fa-cc-mastercard"></i>
                                    <i class="fab fa-cc-amex"></i>
                                </div>
                                <div class="error-message" id="cardNumber-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="nameOnCard">Name on Card</label>
                                <input type="text" id="nameOnCard" placeholder="John Doe" required>
                                <div class="error-message" id="nameOnCard-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="expiry">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
                                <div class="error-message" id="expiry-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123" maxlength="3" required>
                                <div class="error-message" id="cvv-error"></div>
                            </div>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="save-info" checked>
                            <label for="save-info">Save my information</label>
                        </div>
                    </div>

                    <!-- PAYMENT ORDER SUMMARY -->
                    <aside class="order-summary" id="payment-order-summary">

                        <h2><i class="fas fa-receipt"></i> Order Summary</h2>

                        <div class="summary-row">
                            <span>Subtotal (<span id="payment-item-count">0</span> items):</span>
                            <span id="payment-subtotal">Rs.0.00</span>
                        </div>

                        <div class="summary-row">
                            <span>Delivery:</span>
                            <span id="payment-delivery-cost">Rs.0.00</span>
                        </div>

                        <div class="summary-row">
                            <span>Tax (15%):</span>
                            <span id="payment-tax-cost">Rs.0.00</span>
                        </div>

                        <div class="summary-total">
                            <div class="summary-row">
                                <span>Total:</span>
                                <span id="payment-total-cost">Rs.0.00</span>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="back-to-info-btn">
                                <i class="fas fa-arrow-left"></i> Back to Information
                            </button>
                            <button class="btn btn-primary" id="place-order-btn">
                                Place Order <i class="fas fa-check"></i>
                            </button>
                        </div>

                        <div class="security-note">
                            <i class="fas fa-lock"></i> Your payment details are securely encrypted
                        </div>
                    </aside>

                </section>

            </div>
        </main>
    </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">
    <i class="fas fa-info-circle"></i>
    <span class="toast-message" id="toast-message"></span>
    <button class="toast-close" onclick="this.parentElement.classList.remove('show')">&times;</button>
</div>

<!-- JS -->
<script src="{% static 'orders/checkout.js' %}"></script>
<script src="{% static 'orders/loadCities.js' %}"></script>

{% endblock %}
